:_content-type: PROCEDURE
:imagesdir: ../../../images

[id="setting-up-s3-bucket-for-xray-images"]
= Using {solution-name-upstream} utilities to set up AWS S3 bucket

To use the link:https://github.com/validatedpatterns/utilities/tree/main/aws-tools[aws-tools], complete the following steps:

.Procedure

. Export the following environment variables for AWS. Ensure that you replace the values with your keys:
+
[source,terminal]
----
export AWS_ACCESS_KEY_ID=AKXXXXXXXXXXXXX
export AWS_SECRET_ACCESS_KEY=gkXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
----

. Create the S3 bucket and copy over the data from the {solution-name-upstream} public bucket to the created bucket for your demo. You can do this on the cloud providers console or you can use the scripts that are provided in link:https://github.com/validatedpatterns/utilities[utilities] repository:
+
[source,terminal]
----
$ python s3-create.py -b mytest-bucket -r us-west-2 -p
$ python s3-sync-buckets.py -s validated-patterns-md-xray -t mytest-bucket -r us-west-2
----
+
.Example output

image:/videos/bucket-setup.svg[Bucket setup]

Make a note of the name and the URL for the bucket for further pattern configuration. For example, you must update these values in a `values-global.yaml` file, where there is a section for `s3:`.

