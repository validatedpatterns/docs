<!doctype html><html><head><link rel=stylesheet href=https://docs-ng.hybrid-cloud-patterns.io/sass/patternfly.css><link rel=stylesheet href=https://docs-ng.hybrid-cloud-patterns.io/sass/patternfly-addons.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.2/css/solid.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.2/css/fontawesome.css><link rel=stylesheet href=/css/custom.css><title>Getting Started | Hybrid Cloud Patterns - NG Site</title></head><body><div class=pf-c-page><header class=pf-c-page__header><div class=pf-c-page__header-brand><a href=/ class=pf-c-page__header-brand-link><img src=/images/hybrid_cloud_patterns.png alt="Hybrid Cloud Patterns - NG Site"></a></div><div class=pf-c-page__header-tools><nav class="pf-c-nav pf-m-horizontal" role=navigation><ul class=pf-c-nav__list><li class="pf-c-nav__item pf-m-current"><a class=pf-c-nav__link href=/patterns/ title=Patterns>Patterns</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/learn/ title=Learn>Learn</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/contribute/ title=Contribute>Contribute</a></li><li class=pf-c-nav__item><a class=pf-c-nav__link href=/blog/ title=Blog>Blog</a></li></ul></nav></div></header><div class=pf-c-page__sidebar><div class=pf-c-page__sidebar-body><div class=pf-c-nav><ul class=pf-c-nav__list><li class=pf-c-nav__item><a href=/patterns/ class=pf-c-nav__link><span class="pf-c-icon pf-m-md pf-m-inline"><span class=pf-c-icon__content><i class="fas fa-angle-left" aria-hidden=true></i></span></span>
<span style=padding-left:10px>Back to Patterns</span></a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://docs-ng.hybrid-cloud-patterns.io/patterns/multicloud-gitops/ class=pf-c-nav__link>Multicloud GitOps</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://docs-ng.hybrid-cloud-patterns.io/patterns/multicloud-gitops/getting-started/ class="pf-c-nav__link pf-m-current">Getting Started</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://docs-ng.hybrid-cloud-patterns.io/patterns/multicloud-gitops/managed-cluster/ class=pf-c-nav__link>Managed cluster sites</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://docs-ng.hybrid-cloud-patterns.io/patterns/multicloud-gitops/cluster-sizing/ class=pf-c-nav__link>Cluster Sizing</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://docs-ng.hybrid-cloud-patterns.io/patterns/multicloud-gitops/imperative-actions/ class=pf-c-nav__link>Imperative Actions</a></li><li class="pf-c-nav__item pf-m-expanded"><a href=https://docs-ng.hybrid-cloud-patterns.io/patterns/multicloud-gitops/ideas-for-customization/ class=pf-c-nav__link>Ideas for Customization</a></li></ul></div></div></div><main class=pf-c-page__main><section class=pf-c-page__main-section><div class="pf-l-grid pf-m-gutter"><div class="pf-l-grid__item pf-m-8-col"><div class=pf-c-content><div class=pf-c-content><h1 id=deploying-the-multicloud-gitops-pattern>Deploying the Multicloud GitOps pattern</h1><h2 id=prerequisite>Prerequisite</h2><ul><li>An OpenShift cluster<ul><li>To create an OpenShift cluster, go to the <a href=https://console.redhat.com/>Red Hat Hybrid Cloud console</a>.</li><li>Select <strong>OpenShift -> Clusters -> Create cluster</strong>.</li><li>The cluster must have a dynamic <code>StorageClass</code> to provision <code>PersistentVolumes</code>. See <a href=../../multicloud-gitops/cluster-sizing>sizing your cluster</a>.</li></ul></li><li>Optional: A second OpenShift cluster for multicloud demonstration.</li><li>A GitHub account and, optionally, a token for it with repositories permissions, to read from and write to your forks.</li><li>The Helm binary. For details, see <a href=https://helm.sh/docs/intro/install/>Installing Helm</a>.</li></ul><p>The use of this pattern depends on having at least one running Red Hat
OpenShift cluster. It is desirable to have a cluster for deploying the GitOps
management hub assets and a separate cluster(s) for the managed cluster(s).</p><p>If you do not have a running Red Hat OpenShift cluster, you can start one on a
public or private cloud by using <a href=https://console.redhat.com/openshift/create>Red Hat&rsquo;s cloud
service</a>.</p><h2 id=procedure>Procedure</h2><ol><li><p>Install the installation tooling dependencies. You will need:</p><p>{% include prerequisite-tools.md %}</p></li><li><p>Fork the <a href=https://github.com/hybrid-cloud-patterns/multicloud-gitops>multicloud-gitops</a> repository on GitHub. It is necessary to fork because your fork will be updated as part of the GitOps and DevOps processes.</p></li><li><p>Clone the forked copy of this repository.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git clone git@github.com:your-username/multicloud-gitops.git
</span></span></code></pre></div></li><li><p>Create a local copy of the Helm values file that can safely include credentials.</p><p><strong>Warning:</strong>
Do not commit this file. You do not want to push personal credentials to GitHub.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cp values-secret.yaml.template ~/values-secret.yaml
</span></span><span style=display:flex><span>vi ~/values-secret.yaml
</span></span></code></pre></div></li><li><p>Customize the deployment for your cluster.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git checkout -b my-branch
</span></span><span style=display:flex><span>vi values-global.yaml
</span></span><span style=display:flex><span>git add values-global.yaml
</span></span><span style=display:flex><span>git commit values-global.yaml
</span></span><span style=display:flex><span>git push origin my-branch
</span></span></code></pre></div></li><li><p>You can deploy the pattern using the <a href=/infrastructure/using-validated-pattern-operator/>validated pattern operator</a>. If you do use the Operator, then skip Verification.</p></li></ol><h2 id=verification>Verification</h2><ol><li><p>Preview the changes.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>make show
</span></span></code></pre></div></li><li><p>Login to your cluster using oc login or exporting the <code>KUBECONFIG</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>oc login
</span></span></code></pre></div><p>or set <code>KUBECONFIG</code> to the path to your <code>kubeconfig</code> file. For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>export KUBECONFIG<span style=color:#f92672>=</span>~/my-ocp-env/hub/auth/kubconfig
</span></span></code></pre></div></li><li><p>Apply the changes to your cluster.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>make install
</span></span></code></pre></div></li><li><p>Verify that the Operators have been installed.</p><ol><li>To verify, in the *OpenShift Container Platform web console, navigate to <strong>Operators â†’ Installed Operators</strong> page.
2.Check that the Operator is installed in the <code>openshift-operators</code> namespace and its status is <code>Succeeded</code>.</li></ol></li></ol><ol start=5><li>Verify that all applications are synchronized. Under the project <code>multicloud-gitops-hub</code> click the URL for the <code>hub</code> gitops <code>server</code>. The Vault application is not synched.</li></ol><p><a href=/images/multicloud-gitops/multicloud-gitops-argocd.png><img src=/images/multicloud-gitops/multicloud-gitops-argocd.png alt="Multicloud GitOps Hub"></a></p><h2 id=multicloud-gitops-application-demos>Multicloud GitOps application demos</h2><p>As part of this pattern, HashiCorp Vault has been installed. Refer to the section on <a href=https://hybrid-cloud-patterns.io/secrets/vault/>Vault</a>.</p><h1 id=next-steps>Next steps</h1><h2 id=deploying-the-managed-cluster-applications>Deploying the managed cluster applications</h2><p>After the management hub is set up and works correctly, attach one or more managed clusters to the architecture (see diagrams below).</p><p>For instructions on deploying the edge, refer to <a href=https://hybrid-cloud-patterns.io/multicloud-gitops/managed-cluster/>Managed Cluster Sites</a>.</p><blockquote><p>Contribute to this pattern:
<a href=https://groups.google.com/g/hybrid-cloud-patterns>Help & Feedback</a>{: .btn .fs-5 .mb-4 .mb-md-0 .mr-2 }
<a href=https://github.com/hybrid-cloud-patterns/multicloud-gitops/issues>Report Bugs</a>{: .btn .btn-red .fs-5 .mb-4 .mb-md-0 .mr-2 }</p></blockquote></div></div></div><div class="pf-l-grid__item pf-m-4-col"><nav class="pf-c-jump-links pf-m-vertical" aria-label=Contents><div class=pf-c-jump-links__main><div class=pf-c-jump-links__header><div class=pf-c-jump-links__label><h1>Table of Contents</h1></div></div><nav id=TableOfContents><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#deploying-the-multicloud-gitops-pattern>Deploying the Multicloud GitOps pattern</a><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#prerequisite>Prerequisite</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#procedure>Procedure</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#verification>Verification</a></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#multicloud-gitops-application-demos>Multicloud GitOps application demos</a></li></ul></li><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#next-steps>Next steps</a><ul class=pf-c-jump-links__list><li class=pf-c-jump-links__item><a class=pf-c-jump-links__link href=#deploying-the-managed-cluster-applications>Deploying the managed cluster applications</a></li></ul></li></ul></nav></div></nav></div></div></section></main></div><div><div style=padding:10px;text-align:center;color:#d2d2d2;background-color:#000>Copyright &copy; 2022 Red Hat, Inc.</div></div></body></html>