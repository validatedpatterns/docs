{{ $currentlink := .RelPermalink }}
<div class="pf-c-nav">
  <ul class="pf-c-nav__list">
    <li class="pf-c-nav__item">
      <a href="/patterns/" class="pf-c-nav__link">
        <span class="pf-c-icon pf-m-md pf-m-inline">
          <span class="pf-c-icon__content">
            <i class="fas fa-angle-left" aria-hidden="true"></i>
          </span>
        </span>
        <span style="padding-left: 10px;">Back to Patterns</span>
      </a>
    </li>
    {{ if .Page.IsNode }}
      <li class="pf-c-nav__item pf-m-expanded">
        <a href="{{ .Permalink }}" class="pf-c-nav__link pf-m-current">
          {{- .Title -}}
        </a>
      </li>
      {{ range .Pages }}
        <li class="pf-c-nav__item pf-m-expanded">
          <a href="{{ .Permalink }}" class="pf-c-nav__link">
            {{- .Title -}}
          </a>
        </li>
      {{ end }}
    {{ else }}
      <li class="pf-c-nav__item pf-m-expanded">
        <a href="{{ .Parent.Permalink }}" class="pf-c-nav__link">
          {{- .Parent.Title -}}
        </a>
      </li>
      {{ range .Parent.Pages }}
        <li class="pf-c-nav__item pf-m-expanded">
          <a href="{{ .Permalink }}" class="pf-c-nav__link {{ if (eq .RelPermalink $currentlink) }}pf-m-current{{ end }}">
            {{- .Title -}}
          </a>
        </li>
      {{ end }}
    {{ end }}
  </ul>
</div>
